---
import {
  Card,
  CardContent,
  CardDescription,
  CardFooter,
  CardHeader,
  CardTitle,
} from "@/components/ui/card";
import { Alert, AlertDescription, AlertTitle } from "@/components/ui/alert";
import { Mail } from "lucide-react";
import { Waves } from "@/components/ui/waves-background";
import { BackButtonIsland } from "@/islands/navigation/BackButton";

interface Props {
  error: string;
}

const { error } = Astro.props;
---

<div>
  <div class="absolute inset-0">
    <Waves
      client:visible
      lineColor="rgba(0, 0, 0, 0.3)"
      backgroundColor="transparent"
      waveSpeedX={0.02}
      waveSpeedY={0.01}
      waveAmpX={40}
      waveAmpY={20}
      friction={0.9}
      tension={0.01}
      maxCursorMove={120}
      xGap={12}
      yGap={36}
    />
  </div>
  <div class="relative flex w-full items-center justify-center p-6 md:p-10">
    <div class="w-full max-w-md bg-white">
      <Card className="border-2">
        <CardHeader className="space-y-1">
          <div class="flex justify-center mb-4">
            <div class="bg-destructive/10 p-3 rounded-full">
              <Mail className="w-6 h-6 text-destructive" />
            </div>
          </div>
          <CardTitle className="text-2xl text-center">
            Something went wrong
          </CardTitle>
          <CardDescription className="text-center">
            There was a problem with your authentication request
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          <Alert variant="destructive">
            <AlertDescription>
              <p>
                We couldn't complete the authentication process. This might be
                due to an expired link or invalid credentials.
              </p>
            </AlertDescription>
          </Alert>
          <Alert variant="default" className="bg-muted">
            <AlertDescription>
              <p class="text-sm text-muted-foreground font-mono">
                Code: {error}
              </p>
            </AlertDescription>
          </Alert>
        </CardContent>
        <CardFooter className="flex flex-col space-y-2">
          <BackButtonIsland client:visible href="/login">
            Try Again
          </BackButtonIsland>
          <p class="text-xs text-center text-muted-foreground">
            If the problem persists, please try clearing your browser cookies.
          </p>
        </CardFooter>
      </Card>
    </div>
  </div>
</div>
